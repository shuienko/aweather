<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light">
    <title>aweather | forecast for astrophotographers</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png">
    <link rel="icon" href="/static/favicon.ico" sizes="any">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/static/favicon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/static/favicon-512x512.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root{
            --bg: #f7f9fc;
            --panel: #ffffff;
            --text: #0f172a;
            --muted: #64748b;
            --accent: #2563eb;
            --border: #e5e7eb;
        }
        html, body { background: var(--bg); color: var(--text); }
        body, input, button, select, textarea { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
        /* Hide empty forecast box until data arrives */
        #weatherResult:empty { display: none; }
            /* Bold style for rows with ok status */
            .ok-row { font-weight: 700; }
        /* Suggestions dropdown */
        #suggestions { position: absolute; left: 0; right: 0; top: calc(100% + 6px); z-index: 50; background: var(--panel); border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 10px 30px rgba(2,6,23,0.08); list-style: none; padding-left: 0; max-height: 340px; overflow: auto; }
        #suggestions li { padding: 10px 14px; cursor: pointer; border-bottom: 1px solid #f1f5f9; }
        #suggestions li:last-child { border-bottom: none; }
        #suggestions li:hover { background: #f8fafc; }
    </style>
    <script src="/static/app.js" defer></script>
</head>
<body>
    <div class="mx-auto max-w-3xl px-4 py-8">
        <header class="text-center mb-6">
            <h1 class="text-3xl font-semibold tracking-tight">aweather</h1>
            <p class="text-[15px] text-slate-500 mt-2">Minimal, focused forecast for astrophotographers</p>
        </header>

        <div class="mt-2 mb-12 flex flex-wrap items-center justify-center gap-2 text-[13px]">
            <div class="flex items-center gap-1">
                <button id="unitTempC" type="button" class="flex items-center justify-center rounded-full border border-blue-600 bg-white h-7 w-14 text-[11px] text-blue-600 hover:bg-blue-50">°C</button>
                <button id="unitTempF" type="button" class="flex items-center justify-center rounded-full border border-blue-600 bg-white h-7 w-14 text-[11px] text-blue-600 hover:bg-blue-50">°F</button>
            </div>
            <span aria-hidden="true" class="px-1 text-slate-300 select-none">|</span>
            <div class="flex items-center gap-1">
                <button id="unitWindKmh" type="button" class="flex items-center justify-center rounded-full border border-blue-600 bg-white h-7 w-14 text-[11px] text-blue-600 hover:bg-blue-50">km/h</button>
                <button id="unitWindMph" type="button" class="flex items-center justify-center rounded-full border border-blue-600 bg-white h-7 w-14 text-[11px] text-blue-600 hover:bg-blue-50">mph</button>
            </div>
            <span aria-hidden="true" class="px-1 text-slate-300 select-none">|</span>
            <div class="flex items-center gap-1">
                <button id="time24h" type="button" class="flex items-center justify-center rounded-full border border-blue-600 bg-white h-7 w-14 text-[11px] text-blue-600 hover:bg-blue-50">24h</button>
                <button id="time12h" type="button" class="flex items-center justify-center rounded-full border border-blue-600 bg-white h-7 w-14 text-[11px] text-blue-600 hover:bg-blue-50">12h</button>
            </div>
        </div>

        <div class="relative flex gap-3 items-stretch">
            <div class="relative flex-1">
                <div class="pointer-events-none absolute inset-y-0 left-3 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-slate-400"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-4.35-4.35M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"/></svg>
                </div>
                <input id="city" type="text" value="%s" placeholder="Search city, region, country" oninput="fetchSuggestions(this.value)"
                       class="w-full rounded-xl border border-slate-200 bg-white/90 pl-10 pr-3 py-3 text-[15px] outline-none transition focus:border-blue-400 focus:ring-2 focus:ring-blue-100 placeholder:text-slate-400" />
                <ul id="suggestions" style="display:none;"></ul>
             </div>
             <div class="relative shrink-0 group">
                 <button id="geoBtn" onclick="useMyLocation()" aria-label="Use my location" aria-describedby="geoTip"
                         class="flex items-center justify-center rounded-full border border-slate-200 bg-white p-2 text-slate-700 shadow-sm transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-blue-200">
                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-slate-600">
                         <circle cx="12" cy="12" r="3" stroke-width="2" />
                         <path d="M12 2v4M12 18v4M2 12h4M18 12h4" stroke-width="2" stroke-linecap="round" />
                     </svg>
                 </button>
                 <div id="geoTip" role="tooltip"
                      class="pointer-events-none absolute -bottom-1 left-1/2 -translate-x-1/2 translate-y-full whitespace-nowrap rounded-md bg-slate-900 text-white text-[11px] px-2.5 py-1 shadow-lg opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity">
                     Use my location
                     <div class="absolute -top-1 left-1/2 -translate-x-1/2 h-2 w-2 rotate-45 bg-slate-900"></div>
                 </div>
             </div>
            <button id="fetchBtn" onclick="fetchWeather()"
                    class="shrink-0 rounded-xl bg-blue-600 px-4 py-3 text-white font-medium shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200">
                Get forecast
            </button>
        </div>

        <div id="error" style="display:none" class="mt-3 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700">Error</div>

        <input type="hidden" id="latitude" value="%s">
        <input type="hidden" id="longitude" value="%s">

        <div id="forecastDetails" style="display:none" class="mt-4 text-center text-[15px] text-slate-600 font-medium"></div>

        <div class="mt-3">
            <div class="text-center">
                <div id="weatherResult" class="space-y-3"></div>
                <div id="loader" style="display:none" class="mt-3 text-center">
                    <div class="inline-block h-5 w-5 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"></div>
                </div>
            </div>
        </div>

        

        <section class="mt-8 rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
            <h2 class="text-lg font-semibold mb-1">About</h2>
            <p class="text-slate-600 text-[15px] mt-1">aweather is a clean, ultra‑minimalist forecast for astrophotographers. It answers one question: <b>Is the weather good for astrophotography tonight, in the next 3 hours, or tomorrow?</b> No humidity, precipitation, pressure, or dew point — just cloud cover, wind speed, and a simple “ok” when conditions are good.</p>
        </section>

        <section class="mt-4 rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
            <h2 class="text-lg font-semibold mb-1">Legend</h2>
            <pre class="text-[13px] md:text-[13.5px] leading-relaxed text-slate-700 mt-2 whitespace-pre overflow-x-auto">
<b>• hour</b>           - time of the day
<b>• ok?</b>            - status; "ok" = (cloud cover < 25%%) and (wind speed < 15 km/h)
<b>• temp</b>           - temperature (°C or °F)
<b>• moon</b>           - Moon illumination percentage
<b>• low, mid, high</b> - cloud cover percentage at different altitudes
<b>• wind</b>           - wind speed (km/h or mph)
<b>• gusts</b>          - wind gusts (km/h or mph)
<b>• seeing</b>         - seeing index (lower is better)
<b>• top info</b>       - date; rise/set time for Moon and Sun (12h or 24h). "*" means next/previous day
            </pre>
        </section>

        <section class="mt-4 rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
            <h2 class="text-lg font-semibold mb-2">Contact & Links</h2>
            <div class="text-slate-600 text-[15px] space-y-1">
                <div>• All information comes from <a class="text-blue-600 hover:underline" href="https://open-meteo.com/">Open‑Meteo.com</a> API.</div>
                <div>• Source code: <a class="text-blue-600 hover:underline" href="https://github.com/shuienko/aweather">GitHub</a> (pull requests welcome).</div>
                <div>• If you like this page, please consider supporting me using the button below. Thank you!</div>
            </div>
        </section>

        <footer class="mt-6 text-center text-sm text-slate-500">
            <form action="https://www.paypal.com/donate" method="post" target="_top" class="mb-3">
                <input type="hidden" name="hosted_button_id" value="R3TWPEY9X4YKA" />
                <button type="submit" aria-label="Donate with PayPal"
                        class="inline-flex items-center gap-2 rounded-full bg-blue-600 px-4 py-2 text-white font-medium shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-4 w-4 text-white/90">
                        <path d="M12 21.35 10.55 20.03C5.4 15.36 2 12.28 2 8.5 2 6 4 4 6.5 4c1.54 0 3.04.99 3.57 2.36h.87C11.46 4.99 12.96 4 14.5 4 17 4 19 6 19 8.5c0 3.78-3.4 6.86-8.55 11.53L12 21.35z"/>
                    </svg>
                    Donate
                </button>
            </form>
            © aweather | <a class="text-blue-600 hover:underline" href="https://open-meteo.com/">Weather data by Open‑Meteo.com</a>
        </footer>
    </div>

    
</body>
</html>